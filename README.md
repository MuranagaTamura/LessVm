# TestVm3
VMを実装したい



# TODO

o: 実装完了
@: 実装が困難なため、ペンディング
x: オミット

**Vm命令実装TODO**

| チェック | 項目    | 備考 |
| -------- | ------- | ---- |
| o        | LOAD    |      |
| o        | STORE   |      |
| o        | MOVE    |      |
| o        | ADD     |      |
| o        | SUB     |      |
| o        | MUL     |      |
| o        | DIV     |      |
| o        | REM     |      |
|          | SLL     |      |
|          | SRL     |      |
|          | AND     |      |
|          | OR      |      |
|          | XOR     |      |
| o        | CMP     |      |
| o        | JMP     |      |
| o        | JEQ     |      |
| o        | JNE     |      |
| o        | JLT     |      |
| o        | SYSCALL |      |





# 仕様

## システムコール

* システムコールをコンパイラに知らせれるように属性を使用する
* 属性（スクリプト使用名，返り値タイプ，引数タイプ）
* エンジン側では型の保証はしてくれない
  * あくまでも，関数を実行するだけ
  * 関数の引数もVmの状態を渡すだけで，引数内容取得とかは別途実装する
  * 関数はIEnumrator\<int\>で実装する
    * MoveNextでFinishまでエンジンの処理を止めるため
    * Finishはintで~~-1~~0が返ってくるなどにする
  * 引数がどこに保存されているかはスクリプトのコンパイラに依存
* VmStatusの便利関数などは拡張メソッドで実装するなど，スクリプト側の実装に委譲させる